<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EPUB Unicode Checker</title>
    <script src="https://unpkg.com/@zip.js/zip.js@2.6.12/dist/zip.min.js"></script>
    <script src="https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.css">
</head>
<body>
<h1>Amazon EPUB Fix</h1>
<p>
    Amazon Send-to-Kindle service has accepted EPUB, however, for historical reason
    it still assumes ISO-8859-1 encoding if no encoding is specified. This creates weird formatting errors for special
    characters.
</p>
<p>
    This tool will try to fix your EPUB by adding the UTF-8 specification to your EPUB. It currently does
    not fix other errors.
</p>
<p>
    <b>Privacy:</b> The book is processed locally in your browser. We do not upload your file anywhere.
</p>
<p>
    <b>Warning: </b> This tool come at no warranty. Please still keep your original EPUB.
    We don't guarantee the resulting file will be valid EPUB file, but it should.
</p>

<h2>Select your EPUB</h2>
<form>
    <input id="file" type="file" accept=".epub">
</form>
<div id="processing" style="display:none;color:blue">
    Processing...
</div>
<div id="sys-error" style="display:none;color:red">
    The system encountered an error. Perhaps you are not selecting EPUB
    file?
</div>
<div id="no-error" style="display:none;color:blue">
    No missing encoding detected. Perhaps there are other errors.
</div>
<div id="has-error" style="display:none;color:green">
    Encoding fixed.<br>
    <button id="btn">Download the fixed file.</button>
</div>

<hr>

<small>Source code is available on <a href="https://github.com/innocenat/kindle-epub-fix" rel="noopener" target="_blank">GitHub.</a></small>

<script src="script.js"></script>
</body>
</html>